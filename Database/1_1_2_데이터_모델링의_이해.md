## 엔터티(Entity)

#### 앤터티의 게념
- 정의: 변별할 수 있는 사물, 데이터베이스 내에세 번별 가능한 객체, 정보를 저장할 수 있는 어떤 것 등을 의미한다.
- 사람, 장소, 사건, 개념 등의 명사에 해당되고, 업무상 관리가 필요한 관심사에 해당되며, 저장되기 위한 어떤 것이다.
- 업무에 필요하고 유용한 정보를 저장하고 관리하기 위한 집합적인 것!

#### 엔터티와 인스턴스
- 엔터티는 범주, 개념에 해당되고, 인스턴스는 실제 객체에 해당된다.

![image](https://user-images.githubusercontent.com/24373728/167255652-19e1252d-af23-4a64-8205-97ad8b294c6d.png)

- 이렇듯, 엔터티는 인스턴스의 집합이라고 할 수 있다.

#### 엔터티의 특징
- 반드시 해당 업무에서 필요하고 관리하고자 하는 정보이어야 한다.
- `유일한 식별자(PK)`에 의해 식별이 가능해야 한다. 
- 영속적으로 존재하는 인스턴스의 집합이어야 한다. --> `2개 이상의 인스턴스 집합`이어야 한다.
- 하나의 인스턴스만 갖는 엔터티는 집합이 아니다! 
- 엔터티는 업무 프로세스에 의해 이용되어야 한다.
- 엔터티는 반드시 `속성`이 있어야 한다.
- 엔터티는 다른 엔터티와 최소 한 개 이상의 관계가 있어야 한다. 단, 통계성/코드성 엔터티는 관계를 생략할 수 있다.

#### 엔터티의 분류
- 엔터티의 분류는 유무형에 따른 분류와 발생시점에 따른 분류로 나뉜다.
- 유/무형에 따른 분류
  - 무형 엔터티: 물리적인 형태가 있는 엔터티 (사원, 물품, 강사)
  - 개념 엔터티: 물리적인 형태가 없고 개념적으로 사용되는 엔터티 (조직, 보험상품)
  - 사건 엔터티: 업무를 수행함에 따라 발생되는 엔터티, 비교적 발생량이 많다 (주문, 청구, 미납)
- 발생시점에 따른 분류
  - 기본 엔터티: 업무에 원래 존재하는 정보로 독립 가능한 엔터티 (사원, 부서, 고객)
  - 중심 엔터티: 기본 엔터티, 업무로부터 발생되고 다른엔터티와 관계를 통해 행위 엔터티를 생성한다 (계약, 청구, 주문)
  - 행위 엔터티: 두 개 이상의 부모로부터 발생되고 자주 내용이 바뀌는 엔터티 (주문목록, 사원변경이력)

#### 엔터티의 명명
- 협업에서 사용하는 용어를 사용한다
- 가능하면 약어를 사용하지 않는다
- 단수명사를 사용한다
- 모든 엔터티에서 유일하게 이름이 부여되어야 한다
- 엔터티 생성의미대로 이름을 부여한다

## 속성 (Attribute)
- 졍의: 업무에서 필요로 하는 인스턴스에서 관리하고자 하는 의미상 더 이상 분리되지 않는 최소의 데이터 단위
- 업무에서 필요로 하고, 의미상 분리되지 않는다
- 업무상 관리하기 위한 최소의 의미 단위이다
- 속성의 특징
  - 한 속성은 한 개의 값만 가진다 
  - 하나의 속성에 여러 개의 값이 있는 다중값일 경우 별도의 엔터티를 이용하여 분리한다.
  - 정해진 주식별자에 함수적 종속성을 가져야 한다 ( 정규화 )

#### 속성의 분류
- 특성에 따른 분류
  - 기본 속성: 업무에서 추출한 모든 속성에 해당되며 엔터티에 가장 일반적이고 많은 속성을 차지한다
  - 설계 속성: 데이터 모델링을 위해 만든 속성 (일련 번호 등)
  - 파생 속성: 계산되는 값 속성
- 엔터티 구성방식에 따른 분류
  - PK 속성: 엔터티를 식별할 수 있는 속성
  - FK 속성: 다른 엔터티와의 관계를 나타내는 속성
  - 일반 속성: PK, FK가 아닌 속성
- 세부의미에 따른 분류
  - 단순 속성: 세부 의미로 쪼갤 수 없는 속성
  - 복합 속성: 세부 의미로 쪼갤 수 있는 속성
- 개수에 따른 분류
  - 단일값 속성: 속성 하나에 한 개의 값을 가지는 속성
  - 다중값 속성: 속성 하나에 다중 값을 가지는 속성 -> 1차 정규화를 하거나, 별도의 엔터티를 만들어 관계로 연결하자

#### 도메인 Domain
- 속성이 가질 수 있는 값의 범위
- ex 학점이라는 속성이 가질 수 있는 범위는 0.0 ~ 4.5/4.3 이다

#### 속성의 명명
- 해당 업무에서 사용하는 이름을 부여한다
- 서술식 속성명은 사용하지 않는다. 명사형 속성명을 사용한다
- 약어사용은 가급적 제한한다
- 전체 데이터모델에서 유일성 확보하는 것이 좋다
- 가능하면 속성의 이름도 유일하게 작성하는 것이 좋다. 나중에 데이터에 대한 흐름을 파악하고, 데이터의 정합성을 유지하는데 큰 도움이 된다. 또한 반정규화(테이블 병합, 중복, 분리 등)을 적용할 때 속성명 충돌을 해결할 수 있다.

## 관계 (Relationship)
- 정의: 인스턴스 사이의 논리적인 연관성으로서 존재 또는 행위로서 서로에게 연관성이 부여된 상태.
- 엔터티가 인스턴스의 집합을 논리적으로 표현하였다면, 관계는 관계 패어링의 집합을 논리적으로 표현한 것.
- 관계 페어링
  - 엔터티 안의 인스턴스가 개별적으로 관계를 가지는 것

#### 관계의 분류
- 관계의 분류는, 존재에 의한 관계 / 행위에 대한 관계로 나뉜다.
- `존재에 따른 분류`
  - 엔터티 간의 상태를 의미한다.
  - UML에서 연관 관계에 해당되며 실선으로 표현한다.
  - ex) 사원 김동률이 SK 회사에 항상 속해있다 ㅎ
- `행위에 따른 분류`
  - 엔터티 간의 행위를 의미한다
  - UML에서는 의존 관계에 해당되며 점선으로 표현한다.
  - ex) 주문이라는 행위는 고객에 의해 발생된다.
- ERD 에서는 관계 분류에 따른 표기 구분이 없다

#### 관계 표기법
- 관계에서의 표기법을 이해하기 위해 3가지 개념에 대해 알고 있어야 한다.
- `관계명(Membership)`: 관계의 이름
  - 관계이름은 참여자의 관점에 따라 관계 이름이 능동적이거나 수동적으로 명명된다. 
  - 이때 명명규칙은 현재형으로 작성한다. (ex) 강의를 한다, 수업을 받는다.
- `관계차수(Cardinality)`: 1:1, 1:N, 1:M
- `관계선택사양(Optionality)`: 필수/선택
  - 필수참여관계는 필수적으로 연결되어야 하는 관계
  - 선택참여관계는 선택적으로 연결되어야 하는 관계

#### 관계 체크사항
- 두 개의 엔터티 사이에서 관계를 정의할 때 다음 사항들을 체크해본다.
- 두 개의 엔터티 사이에 `관심있는 연관규칙`이 존재하는가
- `정보의 조합`이 발생되는가
- 업무기술서, 장표에 `관계연결에 대한 규칙`이 서술되어 있는가
- 업무기술서, 장표에 관계연결을 가능하게 하는 `동사`가 있는가? (명사는 안된다!)

## 식별자
- 엔터티는 인스턴스들의 집합이다. 여러 개의 집합체를 담고 있는 엔터티에서 각각을 구분할 수 있는 논리적인 이름이 필요하다 -> 식별자
- 정의: 엔터티에 구성되어 있는 여러 개의 속성 중에 `엔터티를 대표할 수 있는 속성`을 의미한다.
- 보통 식별자와 키를 동일시 하는데, 식별자는 업무적으로 구분이 되는 정보로 논리 데이터 모델링 단계에서 사용하고
- 키는 물리 데이터 모델링 단계에서 사용한다.

#### 식별자의 특징
- 식별자의 분류에 따라 특성이 다소 차이가 있다.

#### 주식별자의 특징
- `유일성`: 엔터티 내에 모든 인스턴스들을 유일하게 구분함
  - 사원번호를 주식별자로 하면 각 개인을 구분할 수 있다.
- `최소성`: 주식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야 함
  - 사원번호고 개인을 구분할 수 있다면 굳이 주식별자가 사원번호+이름으로 구성될 필요가 없다
- `불변성`: 주식별자가 특정 엔터티에 지정되면 값이 변하지 않아야 한다.
  - 사원번호의 값이 바뀐다는게 어떤 의미일까.. 스스로 생각해보아라
- `존재성`: 주식별자는 NOT NULL 이어야 한다.
  - 직원이라면 응당 사원번호가 있어야 한다.

#### 식별자 분류체계
- `대표성 여부`
  - 주식별자: 유일성, 최소성, 대표성을 모두 만족하는 식별자 ex) 사원번호
  - 보조식별자: 유일성, 최소성을 만족하는 식별자 ex) 전화번호
- `스스로 생성 여부`
  - 내부식별자: 엔터티 내부에서 스스로 만들어지는 식별자
  - 외부식별자: 타 엔터티와의 관계로 받아오는 식별자
- `속성의 수`
  - 단일식별자: 하나의 속성으로 구성된 식별자 ex) 사원번호 
  - 복합식별자: 둘 이상 속성으로 구성된 식별자 ex) 이름+주민번호
- `대체 여부`
  - 본질식별자: 업우에 의해 만들어지는 식별자
  - 인조식별자: 원조식별자가 복잡하여 인위적으로 만든 식별자 

#### 식별자의 표기법 

![image](https://user-images.githubusercontent.com/24373728/167857615-74dca96d-687a-4712-bffd-abc97d5f05ea.png)

#### 주식별자 도출기준
- 데이터 모델링 작업에서 중요한 작업 중 하나가 주식별자 도출작업이다. 주식별자 도출 기준은 다음과 같다.
- 해당 업무에서 자주 이용되는 속성을 주식별자로 지정한다.
  - 사원번호를 주식별자로 하고, 주민등록번호와 같은 특성을 보조식별자로 둔다.
- 명칭, 내역과 같이 이름으로 기술되는 것은 가능하면 지정하지 않는다! ( 명칭이 길어질 경우 처리가 느려진다 )
- 복합 속성인 경우, 너무 많은 속성이 포함되지 않도록 한다.
  - 주식별자의 속성의 개수가 많다는 것은 일반적으로 7~8개를 의미한다. 
  - 이땐 새로운 인조식별자를 생성하여 새로운 데이터 모델을 구성하여 분리하는게 좋다.

#### 식별자관계와 비식별자관계에 따른 식별자
- 식별자관계: 강한 연결관계를 표현한다.
- 비식별자관계: 약한 연결관계를 표현한다.

1. 부모에게 물려받은 식별자
- 식별자관계: 자식 주식별자에 포함
- 비식별자관계: 자식 일반 속성에 포함됨

2. 식별자/비식별자로만 구성할 경우 문제점
- 식별자로만 구성: 여러 부모의 식별자를 받을 경우, 주식별자의 개수가 많이지게 된다. => 개발 복잡도, 오류가능성 증가
- 비식별자로만 구성: 주식별자가 없어 쓸데없이 부모엔터리를 찾아가서 데이터를 가져와야할 때가 있다. => 개발 효율성 떨어짐

3. 표기법
- 식별자: 실선
- 비식별자: 점선

#### 관계 연결 고려사항
- 식별자관계
  - 강한 관계인 경우
  - 반드시 부모엔터티에 종속
  - 자식 주식별자 구성에 부모 주식별자포함 필요
  - 상속받은 주식별자속성을 타 엔터티에 이전 필요
  - 엔터티 별로 생명주기를 동일하게 관리할 경우
- 비식별자관계
  - 약한 종속 관계
  - 자식 주식별자구성을 독립적으로 구성
  - 자식 주식별자 구성에 부모 주식별자 부분 필요
  - 상속받은 주식별자속성을 타 엔터티에 차단 필요
  - 부모쪽 관계참여가 선택관계.
  - 엔터티별로 생명주기를 다르게 관기할 경우
  - SQL 문장의 복잡성이 증가하는 경우

![image](https://user-images.githubusercontent.com/24373728/167862870-47e28c8a-ff56-4659-b4ec-78d571ecffda.png)

## ERD IE 표기법 vs Barker 표기법

![image](https://user-images.githubusercontent.com/24373728/167862950-2c6c61da-f581-4d0a-b7a8-25026fb4fabd.png)







