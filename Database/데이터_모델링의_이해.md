
## 1장 데이터 모델링의 이해

## 모델링의 정의
- 정의: 현실세계를 추상화, 단순화, 명확화하기 위해 일정한 표기법에 의해 표기하는 기법.
- 특징
  - 추상화(모형화, 가상화): 현실세계를 일정한 형식에 맞추어 표현한다.
  - 단순화: 복잡한 현실 세계를 약속된 규약에 의해 제한된 표기법이나 언어로 표현하여 쉽게 이해할 수 있도록 한다.
  - 명확화: 대상의 애매모호함을 제거하고 정확하게 기술하는 것.

## 데이터모델링
- 정의: 
  - <b>정보시스템을 구축하기 위해, 해당 업무에 어떤 데이터가 존재하는지 또는 업무가 필요로 하는 정보는 무엇인지를 분석하는 방법</b>
  - 현실세계의 데이터에 대해 약속된 표기법에 의해 표현하는 과정(모델링)
  - 데이터베이스를 구축하기 위한 분석/설계의 과정
- 애매모호함을 배제하고 누구나 이해가 가능하도록 정확하게 현상을 기술하는 정확화의 의미를 가진다.
- 시스템 구현과 업무분석 및 업무형상화를 위해 진행하는 사전단계.
  
### 데이터 모델이 제공하는 기능
- 시스템을 현재 또는 원하는 모습으로 가시화
- 시스템의 구조와 행동을 명세화
- 시스템을 구축하는 구조화된 틀을 제공
- 시스템을 구축하는 과정에서 결정한 것들을 문서화
- 다양한 영역에 집중하기 위해 영역의 세부 사항은 숨기는 다양한 관점을 제공한다.
- 특정 목표에 따라 구체화된 상세 수준의 표현방법을 제공한다.

### 데이터모델링의 고려사항
- 데이터모델링이 중요한 이유는 `파급효과`, 복잡한 정보 요구사항의 간결한 `표현`, `데이터 품질`로 정리할 수 있다.

#### 파급효과(Leverage)
- 쉽게 생각해서 시스템 완성 후 잘못된 데이터 모델링을 변경하려고 하면 파급효과가 엄청나게 커진다.
- 데이터베이스, 테이블 간의 독립성이 확보되어야 능동적인 대응이 가능해진다.
- 따라서 그 어떤 설계 과정보다 데이터 설계가 중요하다.

#### 복잡한 정보 요구사항의 간결한 표현(Conoiseness)
- 정보 요구사항이 정확하고 간결하게 표현되어야 한다.

#### 데이터 품질(Data Quality)
- 데이터 표준을 정의하여 데이터의 품질을 높여야한다.

#### 데이터모델링의 유의점
- 데이터 품질 문제를 야기하는 중대한 이유는 데이터 구조의 문제이다.
- 유의점 3가지
  - 중복: 여러 장소에 같은 정보를 저장하지 않도록 한다.
  - 비유연성: 사소한 업무변화에 데이터 모델이 수시로 변경되면 안된다 => 데이의 정의를 데이터의 사용 프로세스와 분리하여 방지.
  - 비일관성: 데이터가 모순되지 않고 일관성이 있어야한다 => 데이터와 데이터 간 상호 연관 관계에 대해 명확한 정의를 내린다.

## 데이터모델링의 3단계 진행

![image](https://user-images.githubusercontent.com/24373728/165754020-07e824e4-51eb-44ab-9266-5277d2952ba2.png)

### 개념적 데이터 모델링(Conceptual Data Modeling)
- 정의: 사용자와 시스템 개발자의 요구사항을 사람이 이해할 수 있는 데이터 모델로 변환하는 과정
- 사용자가 하고자 하는 일의 데이터 간의 관계를 구상하는 단계라고도 할 수 있다.
- 핵심 개체와 그들간의 관계를 발견하고, 이를 표현하기 위해 개체(Entity)-관계(Relationship) 다이어그램(Diagram) = ERD를 만든다.
- 특징: 추상화 수준이 높고, 구체화 수준이 낮다. 

#### ERD 작성법
- 개체: 네모
- 속성: 원
- 관계: 마름모
- 연결관계: 선

![image](https://user-images.githubusercontent.com/24373728/165755999-9fa87e31-ac5c-4014-aea0-5c23702bfbda.png)

- 우리가 Workbench에서 만드는 다이어그램이 ERD이다.

### 논리적 데이터 모델링(Logical Data Modeling)
- 정의: 비즈니스 정보의 논리적인 구조와 규칙을 명확하게 표현하는 기법
- 물리적인 스키마 설계를 하기 전 단뎨의 데이터 모델을 구축하는 과정이다.
- ERD를 특정 DBMS에 맞게 사상하는 과정.
- 특징
  - `정규화`가 이루어진다.
  - 추상화 수준과 구체화 수준이 중간 수준이다.

![image](https://user-images.githubusercontent.com/24373728/165755893-23b51d45-365b-4946-ac07-b01310a32687.png)

### 물리적 데이터 모델링(Physical Data Modeling)
- 정의: 논리적 구조(모델)을 저장장치가 표현할 수 있는 물리적 구조로 변환하는 과정
- 최종적으로 데이터를 관리할 데이터 베이스를 선택하고, 선택한 데이터 베이스에 실제 테이블을 만드는 작업을 의미한다.
- 물리적 스키마를 정의하는 단계라고도 한다.
- 특징: 추상화 수준이 낮고, 구체화 수준이 높다.

## 데이터 독립성의 이해

### 데이터 독립성
- 정의: 데이터 구조의 변경이 다른 테이블에 영향을 미치지 않고, 데이터 구조의 변화로 인한 영향을 프로그램에 미치지 않도록 하는 것.
- 유지보수 비용증가, 데이터복잡도 증가, 데이터 중복성 증가, 요구사항 대응 저하 등의 이유로 데이터 독립성이 필요하게 되었다.
- 효과
  - 각 View의 독립성을 유지하고, 계층별 View에 영향을 주지 않고 변경이 가능하다
  - 단계별 스키마에 따라 데이터 정의어(DDL), 데이터 조작어(DML)가 다름을 제공한다
- 데이터의 독립성을 이해하기 위해서는 3단계로 표현된 ANSI 표준 모델을 보고 `구조`, `독립성`, `사상(Mapping)` 3가지를 이해하면 된다.

### 데이터베이스 3단계

![image](https://user-images.githubusercontent.com/24373728/165758471-f50b9257-69c9-49f1-9a02-4339bdd168f3.png)

- 외부 단계는 사용자와 가장 가까운 단계로 처리하고자 하는 데이터의 유형과 관점에 따라 다른 스키마 구조를 갖고 있다.
- 개념적 단계는 사용자가 처리하는 데이터 유형의 공통적인 요소들을 처리하는 구조를 갖고 있다.
- 내부적 단계는 데이터가 물리적으로 저장된 방법에 대한 스키마 구조를 말한다.
- 각각의 단계는 외부, 개념, 내부 스키마를 갖고 있는 것을 확인할 수 있다.

### 데이터독립성 구성요소

#### 외부 스키마(External Schema)
- 각개 `사용자 관점`에서 보는 개인적 DB 스키마.
- 추상화 정도가 높다

#### 논리적 데이터 독립성
- 개념 스키마가 변경되어도 외부 스키마에 영향 없는 것.
- 논리적 구조가 변경되어도 응용 프로그램에는 영향일 미치지 않는다.

#### 개념 스키마(Conceptual Schema)
- 하나의 개념적 스키마로 구성. 모든 사용자 관점을 통합한 조직 전체의 DB를 기술하는 것.
- 즉, 모든 사용자, `전체`가 보는 DB 스키마를 의미한다.

#### 물리적 데이터 독립성
- 내부 스키마가 변경되어도 외부/개념 스키마는 영향을 받지 않도록 지원하는 독립성
- 저장장치의 구조 변경은 응용프로그램은 물론 개념 스키마에 영향을 미치지 않는다.

#### 내부 스키마(Internal Schema)
- 물리적 장치가 데이터를 저장하는 방법을 표현하는 스키마.

### 사상(Mapping)
- 데이터 독립성에서는 크기 2가지의 사상이 도출된다.

#### 논리적(외부적/개념적) 사상
- 외부적 뷰와 개념적 뷰의 상호 관련성을 정의.
- 외부화면에 보여지는 외부 스키마와 전체에 보여지는 개념 스키마가 연결된다.

#### 물리적(개념적/내부적) 사상
- 개념적 뷰와 저장된 데이터베이스의 상호관련성 정의
- 전체에 보여지는 개념스키마와 저장장치 관점의 내부스키마가 연결된다.

## 데이터 모델의 표기법인 ERD의 이해
### ERD란?
- ERD는 개체와 개체간의 관계를 쉽게 도식화된 다이어그램으로 표시하는 방법이다.

#### ERD 표기법

![image](https://user-images.githubusercontent.com/24373728/165761940-6f4b6d0a-3153-4860-a2a8-055df26c67c3.png)

### ERD 작업 순서(단골문제)
- 1. 엔터티를 그린다
- 2. 엔터티를 적절하게 배치한다
- 3. 엔터티간 관계를 설정한다.
- 4. 관계명을 기술한다.
- 5. 관계의 참여도를 기술한다.
- 6. 관계의 필수여부를 기술한다.

#### 1. 엔터티 그리기
- 개체(엔터티)는 사각형으로 그린다.
- 약한 엔터티는 구석이 동그란? 사각형으로 그린다.
- 약한 엔터티란, 자체적으로 키를 보유하지 못한 엔터티이다.

#### 2. 엔터티를 적절하게 배치
-  일반적으로 사람의 눈은 왼쪽에서 오른쪽, 위에서 아래로 이동하는 경향이 있다.
-  이를 따라 중요도를 선정하여 엔터티를 배치한다. ( 전체를 4분할하고, 중요도에 따라 배치 )

![image](https://user-images.githubusercontent.com/24373728/166464496-78b1c1f1-6b1f-4aae-8d60-8f011305780d.png)


#### 3. 엔터티간 관계 설정
- 서로 관련 있는 엔터티간에 관계를 설정한다.
- 초기에는 기본키(PK) 속성이 상속되는 식별자 관계를 설정하도록 한다.
- 중복되는 관계, Circle 관계가 발생하지 않도록 유의한다.

![image](https://user-images.githubusercontent.com/24373728/166464871-51ac1ff9-5f2a-4512-b652-74ed9f7f894f.png)

#### 4. 관계명 기술
- 엔터티간 연결 관계에 관계이름을 부여한다. 
- 현재형을 사용하고, 지나치게 포괄적인 용어는 사용하지 않도록 한다.

![image](https://user-images.githubusercontent.com/24373728/166465063-f672ee51-30c7-4711-8bc1-33632fb60b2b.png)

#### 5. 관계의 관계차수 기술
- 엔터티 내에 인스턴스들이 얼마나 관계에 참여하는지를 나타내는 관계차수(Cardinality)를 표현.
- 1:1, 1:N, M:N 관계가 있다.
- 다수의 인스턴스가 관계에 참여하면 까마귀발로 표기한다.

![image](https://user-images.githubusercontent.com/24373728/166465699-cc121c6d-54d2-41b8-b9c9-6b0ae5a99dc3.png)

![image](https://user-images.githubusercontent.com/24373728/166465731-d0d27f2a-340c-488b-946c-dfeffbf95cf7.png)

![image](https://user-images.githubusercontent.com/24373728/166465758-c366e159-ada8-498d-a48b-1cbf1033b568.png)

#### 6. 관계의 필수여부 기술
- 관계의 필수/선택 여부에 따라 개체를 연결하는 선에 원을 표시한다.
- 필수/선택 요소를 어떻게 구분하는가? 
- ex) 버스를 예로 들면, 파란불이여도 아직 승객들이 타고 있다면, 혹은 문이 닫히지 않았다면 출발하지 않는다. 이렇듯 모든 승객의 탑승, 그리고 문 닫힘 여부는 버스가 출발하기 위한 필수 요소이고, 신호는 선택적인 요소가 된다.

#### 완성본

![image](https://user-images.githubusercontent.com/24373728/166466444-8da339bb-90dd-410a-8680-72b0ac571197.png)


## 좋은 데이터 모델의 요소
- 데이터 모델의 품질을 평가하는 표준은 없지만, 대체적으로 좋은 데이터 모델이다! 라고 판단할 수 있는 6가지 요소가 있다. 이들은 다음과 같다.

#### 완전성
- 업무에서 필요로 하는 모든 데이터가 데이터 모델에 정의되어 있어야 한다.

#### 중복배제
- 하나의 데이터베이스 내에 동일한 사실은 한번만 저장되어야한다.

#### 업무규칙
- 데이터 모델링 과정에서 도출되고 규명되는 수많은 업무규칙을 데이터 모델에 표현해야 한다.

#### 데이터재사용
- 데이터가 재사용 기능하도록 설계되어야 한다.
- 데이터의 통합성과 독립성에 대해 충분히 고려하여 설계해야 한다.

#### 의사소통
- 엔터티, 관계, 업무규칙 등이 정보시스템에 표현됨으로써 데이터 모델이 의사소통의 도구로 사용된다.

#### 통합성
- 공유 데이터를 여러 업무 영역에서 공동으로 사용하기 용이하게 정의되어야 한다.
- 가장 바람직한 데이터 구조의 형태: 데이터는 조직 전체에서 한번만 정의되고, 이를 여러 영역에서 참조, 활용.




